<html>
<head>
	<meta http-equiv="cache-control" content="no-cache">
	<script src="../../lib/require.js"></script>
	<script>
	//set the correct path for the adventure engine sources
	require.config({
    	paths: {
        	"aos": "../../aos"
    	}
  	});
	function start() {
    	require([
			"aos/game", 
			"aos/services/display", 
			"aos/services/time",
			"aos/services/world",
			"aos/convenience/display",], 
		function(aos, display, time, world, displayUtils) {
			var game;
			
			game = aos.createGame();
			
			//create a time service
			game.register('timer', time.createTimer());
			
			//create a world
			game.register('world', world.createWorld());
			//and a dummy item for testing
			var item = game.get('world').createItem();
			item.set('position', {x:0, y:0});
			
			//create a display from canvas 1
			game.register('display1', display.createDisplay('canvas1'));
			game.get('display1').setCamera(
				//just render a given room
				displayUtils.createRoomCamera( 
					item, 
					//using GameJS sprites
					displayUtils.createGameJSSpriteRenderer() 
				)
			);
			game.get('timer').registerTickCallback(game.get('display1').paint);
			
			//for testing: move item in x and y on different speeds
			game.get('timer').registerTickCallback(function(gametime) {
					item.get('position').x = (item.get('position').x + 1)%97;
			});
			game.get('timer').registerTickCallback(function(gametime) {
					item.get('position').y = (item.get('position').y + 1)%97;
			}, 80);
			
			//start the game loop
			game.get('timer').start();
			
    	});
	};
	</script>
</head>
<body onload="start();">
	<canvas id="canvas1" width="500"></canvas>
</body>
</html>